{"version":3,"sources":["services/puhelinluettelo.js","App.js","index.js"],"names":["axios","get","then","response","data","newObject","post","id","put","delete","PhonebookList","persons","filter","handleDelete","filteredNames","filt","person","name","includes","map","key","number","onClick","e","Filtering","setFilter","className","value","onChange","event","target","PersonForm","newName","newNumber","handleTypingName","handleTypingNumber","handleAddPerson","style","margin","onSubmit","type","Notification","message","App","useState","setNewName","setNewNumber","setPersons","errorMessage","setErrorMessage","useEffect","puhelinluetteloService","console","log","preventDefault","newPerson","updateThisPerson","find","x","window","confirm","updatedPerson","setTimeout","catch","error","length","alert","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aa4521e1.chunk.js","sourcesContent":["import axios from 'axios'  \r\nconst baseUrl = 'persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    const persons = request.then(response => response.data)\r\n    return persons\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    const updatedPerson = request.then(response => response.data)\r\n    return updatedPerson\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\r\nimport puhelinluetteloService from './services/puhelinluettelo'\r\n\r\nconst PhonebookList = ({persons, filter, handleDelete}) => {\r\n  const filteredNames = persons\r\n  const filt = filter\r\n\r\n  if (filter !== \"\") { //filteriin taitaa mennä jtn ennen kuin kaatuu, koska pääsee 7:aan\r\n    const filteredNames = persons.filter(person => (person.name.includes(filt)))\r\n    return (\r\n      <ul>\r\n        {filteredNames.map(person => <li key={person.id} >{person.name} {person.number} <button onClick={ (e) => handleDelete(person.id, e)}> delete </button> </li> )}\r\n      </ul>\r\n    )\r\n  }\r\n  //Jos ei haluta filtteröidä = näytä kaikki.\r\n  else { \r\n    return (\r\n      <ul>\r\n        {filteredNames.map(person => \r\n        <li key={person.id} >{person.name} {person.number} \r\n          <button onClick={ (e) => handleDelete(person.id, e)}> delete </button> \r\n        </li> )}\r\n      </ul>\r\n      )\r\n  }\r\n}\r\n\r\nconst Filtering = ({filter, setFilter}) => {\r\n\r\n  const handleTypingFilter = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  return (\r\n  <div>\r\n\r\n        show contacts with:  \r\n          <input className='inputField'\r\n            name=\"filter\"\r\n            value={filter}\r\n            onChange={handleTypingFilter}\r\n          />\r\n  </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({newName, newNumber, handleTypingName, handleTypingNumber, handleAddPerson}) => { \r\n  return (\r\n  <form style={{margin: 10}} onSubmit={handleAddPerson}>\r\n      <div>\r\n        name: <input className='inputField' //input, ja sit sitä händläillään\r\n          name=\"name\"\r\n          value={newName}\r\n          onChange={handleTypingName}/>\r\n      </div>\r\n      <div>\r\n        number: <input className='inputField'\r\n          name=\"number\" \r\n          value={newNumber}\r\n          onChange={handleTypingNumber}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n} \r\n\r\nconst Notification = ({ message }) => {\r\n  if (message == null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ persons, setPersons ] = useState( [] )\r\n  const [ errorMessage, setErrorMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    puhelinluetteloService\r\n      //.get('http://localhost:3001/persons')\r\n      .getAll()\r\n      .then(response => {\r\n        console.log(response)\r\n        setPersons(response)\r\n      })\r\n  }, [])\r\n\r\n  // tee uus handleDelete\r\n  // src/servicesiin pitää tehdä http update\r\n  // syötä tää setti button onClickille \r\n\r\n\r\n\r\n  const handleDelete = (id, event) => {\r\n    const answer = window.confirm(\"You sure u wanna do this?\")\r\n    if (answer) {\r\n      console.log(\"farewell firewall honey\", id)\r\n      event.preventDefault(event)\r\n      puhelinluetteloService\r\n      .deletePerson(id)\r\n      .then(response => {\r\n        setErrorMessage(\r\n          `That dude was deleted.`\r\n        )\r\n        console.log(\"reesponse\", response)\r\n        console.log(\"errorMessage\", errorMessage)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 3000)\r\n        \r\n        setPersons(persons.filter(person => person.id !== id))\r\n      \r\n      })\r\n      .catch(error => {\r\n        setErrorMessage(\r\n         `(S)he was already removed from the server`  //'${response.name}'\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 3000)\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleAddPerson = (event) => { // handler\r\n    event.preventDefault()\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    \r\n    // tää tyyppi on jo olemassa for sure, eli nyt sit vaa päivitä nro\r\n    // if on olemassa update, else add\r\n\r\n    if (persons.map(person => person.name).includes(newName)) {\r\n      const updateThisPerson = persons.find(x => x.name === newName)\r\n      console.log(\"updated Person\", newPerson)\r\n      const answer = window.confirm(`${newName} exists already. Would you like to update the number?`)\r\n        if (answer) {\r\n          puhelinluetteloService\r\n            .update(updateThisPerson.id, newPerson)\r\n            .then( updatedPerson => {\r\n              setErrorMessage(\r\n                `Contact details of '${newName}' have been updated.` //'${response.name}'\r\n              )\r\n              console.log(\"hey\")\r\n              setTimeout(() => {\r\n                setErrorMessage(null)\r\n              }, 3000)\r\n              setPersons(persons.map(person => person.name !== newName ? person : updatedPerson))\r\n              setNewName('')\r\n              setNewNumber('')\r\n            })\r\n            .catch(error => {\r\n              setErrorMessage(\r\n                `Failed to update contact details.`\r\n              )\r\n            })\r\n        }\r\n      return (\r\n        console.log(\"sup\")\r\n        )\r\n    }\r\n    else if (newNumber.length <= 1) {\r\n      return (window.alert(`Please, give ${newName} an appropriate phone number!`))\r\n    }\r\n    else {\r\n      puhelinluetteloService\r\n        .create(newPerson)\r\n        .then(response => {\r\n          setPersons(persons.concat(response))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setErrorMessage(\r\n            `'${response.name}' has been added.`\r\n          )\r\n          console.log(\"response\", response)\r\n          console.log(\"errorMessage\", errorMessage)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 3000)\r\n        })\r\n    \r\n  }\r\n}\r\n\r\n  const handleTypingName = (event) => (setNewName(event.target.value))\r\n  const handleTypingNumber = (event) => (setNewNumber(event.target.value))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n        <Notification message={errorMessage} />\r\n        <Filtering filter={filter} setFilter={(e) => setFilter(e)}/>\r\n      <h2>Add a New Contact</h2>\r\n        <PersonForm newName={newName} newNumber={newNumber} handleTypingName={handleTypingName} handleTypingNumber={handleTypingNumber} handleAddPerson={handleAddPerson} />\r\n      <h2>Numbers</h2>\r\n        <PhonebookList persons={persons} filter={filter} handleDelete={handleDelete}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}